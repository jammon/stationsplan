<!DOCTYPE html>
{% load staticfiles %}
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>testtest</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="{% static 'vendor/bootstrap/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
  </head>
  <body>

      <div role="main" class="content" id="main-content">
        <h1>Stationsplan</h1>
      </div>
      <div class="next_month">
        <button type="button" id="next_month" class="btn btn-primary">
          n√§chster Monat
        </button>
      </div>
      <div id="log"></div>
    </div> <!-- /.container -->


    <script src="{% static 'vendor/jquery-2.1.0.min.js' %}"></script>
    <script src="{% static 'vendor/jquery.validate.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/bootstrap.js' %}"></script>
    <script src="{% static 'vendor/underscore.js' %}"></script>
    <script src="{% static 'vendor/backbone.js' %}"></script>

    <script src="{% static 'vendor/bootstrap.modalform.js' %}"></script>
    <script src="{% static 'js/models.js' %}"></script>
    <script src="{% static 'js/views.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script type="text/javascript">
      var persons_init = {{ persons|safe }};
      var wards_init = {{ wards|safe }};
      var past_changes = {{ past_changes|safe }};
      var changes = {{ changes|safe }};
      var curr_year = {{ year }};
      var curr_month = {{ month }};
      var next_month_btn = $('#next_month');
      var next_year, next_month;

      sp.initialize_wards(wards_init);
      sp.persons.reset(persons_init);
      add_month(curr_year, curr_month-1);
      _.each(past_changes, sp.apply_change)
      _.each(changes, sp.apply_change)

      if (curr_month==12) {
        next_year = curr_year+1;
        next_month = 0;
      } else {
        next_year = curr_year;
        next_month = curr_month;
      }
      next_month_btn.on('click', function () {
        add_month(next_year, next_month);
        next_month += 1;
        if (next_month==12) {
          next_year += 1;
          next_month = 0;
        }
      });

    </script>
  </body>
</html>
